@using mbill_blazor_admin.Components
@inherits LayoutComponentBase

<AntDesign.Pro.Layout.BasicLayout Logo="@("./logo.svg")"
                                  MenuData="_menuData"
                                  FooterRender=_footerView>
    <RightContentRender>
        <mbill_blazor_admin.Components.RightContent />
    </RightContentRender>
    <ChildContent>
        <Spin Spinning="Loading" Delay="500">
            @Body
        </Spin>
    </ChildContent>
</AntDesign.Pro.Layout.BasicLayout>

@inject IHttpClientFactory httpClient
@code
{
    [Parameter] public bool Loading { get; set; } = false;
    private RenderFragment _footerView =@<CustomFooter />;
    private MenuDataItem[] _menuData { get; set; } = { };

    protected override async Task OnInitializedAsync()
    {
        await base.OnInitializedAsync();
        _menuData = await httpClient.CreateClient("local").GetFromJsonAsync<MenuDataItem[]>("data/menu.json");
    }
}